{% extends "app.html" %}
{% set category = 'user' %}

{% block title %}Logs{% endblock %}
{% block banner %}{% endblock %}

{% block css %}
<style>
    #users_table td {
        font-size: 80%;
    }

    #users_table td.account {
        vertical-align: middle;
    }

    #users_table td.account img {
        display: inline-block;
        max-height: 32px;
    }

    #users_table td.account a {
        /*display: inline-block;*/
        /*white-space: nowrap !important;*/
    }

    #users_table .tr_stripped {
        background-color: rgba(0,0,0,.05);
    }

    .values {
        /* font-family: SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; */
    }
</style>
{% endblock %}

{%block js %}
<script>
    function refresh() {
        var year = $('#sel_year').val();
        var showall = $('#showall').is(':checked') ? '?showall=1' : '';
        gotoURL('/adhesions/' + year + showall);
    }
</script>
{% endblock %}

{% block content %}
<h1 class="h1">Logs</h1>
<div class="row">
    <div class="col">
    </div>
</div>
<article>
    <table id="users_table" class="table table-striped table-sm">
        <thead>
        <tr>
            <th>Date</th>
            <th>Auteur</th>
            <th>Sujet</th>
            <th>Action</th>
            <th>Anciennes valeurs</th>
            <th>Nouvelles valeurs</th>
        </tr>
        </thead>
        <tbody>
        {% for l in logs %}
        <tr>
            <td>{{l.created_on|date("d/m/Y H:i:s")}}</td>
            <td class="account">
                <img src="{{l._u_avatar}}">
                <a href="/users/{{l.user_id}}?returnto=/logs">{{l.u_discord_username|e}}</a>
            </td>
            <td class="account">
                <img src="{{l._t_avatar}}">
                <a href="/users/{{l.target_id}}?returnto=/logs">{{l.t_discord_username|e}}</a>
            </td>
            <td>{{l.action}}</td>
            <td class="values">{{l.old_values}}</td>
            <td class="values">{{l.new_values}}</td>
        </tr>
        {% else %}
        <tr><td colspan="99"><i>Aucune action trouv√©e</i></td></tr>
        {% endfor %}
        </tbody>
    </table>
</article>
<pre>
{{debug}}
</pre>
{% endblock %}
